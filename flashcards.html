<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>Flashcard Game</title>
  <style>
    :root{--bg:#0f1724;--card:#0b1220;--accent:#06b6d4;--muted:#94a3b8;color-scheme:dark}
    *{box-sizing:border-box;font-family:Inter,ui-sans-serif,system-ui,Segoe UI,Roboto,Arial}
    body{margin:0;min-height:100vh;background:linear-gradient(180deg,#071022,#071827);color:#e6eef6;display:flex;align-items:center;justify-content:center;padding:24px}
    .wrap{width:100%;max-width:900px}
    .panel{background:var(--card);padding:20px;border-radius:14px;box-shadow:0 6px 18px rgba(2,6,23,.6)}
    h1{margin:0 0 6px;font-size:22px}
    small{color:var(--muted)}
    textarea{width:100%;height:220px;margin-top:10px;padding:14px;border-radius:10px;border:1px solid rgba(255,255,255,.06);background:#071125;color:inherit}
    button{background:var(--accent);border:0;padding:12px 16px;border-radius:12px;color:#042027;font-weight:700;cursor:pointer;transition:.2s}
    button:hover{transform:scale(1.07)}
    button.ghost{background:transparent;border:1px solid rgba(255,255,255,.1);color:var(--muted)}
    .controls{display:flex;flex-wrap:wrap;gap:10px;margin-top:14px;justify-content:center}

    /* title screen */
    #setup{display:block}
    #game{display:none}

    select{padding:10px;border-radius:10px;background:transparent;color:inherit;border:1px solid rgba(255,255,255,.08)}

    /* card */
    .cardWrap{display:flex;flex-direction:column;align-items:center;gap:18px}
    .card{width:100%;max-width:520px;height:260px;perspective:1200px;cursor:pointer}
    .inner{width:100%;height:100%;position:relative;transition:transform .6s;transform-style:preserve-3d}
    .inner.flipped{transform:rotateY(180deg)}
    .face{position:absolute;inset:0;display:flex;align-items:center;justify-content:center;text-align:center;padding:24px;border-radius:18px;font-size:36px;font-weight:800;backface-visibility:hidden;background:#020617}
    .back{transform:rotateY(180deg);color:var(--accent)}

    .nav{display:flex;gap:20px;margin-top:8px}
    .hint{font-size:13px;color:var(--muted)}
  </style>
</head>
<body>
<div class="wrap">

  <!-- SETUP / TITLE SCREEN -->
  <div id="setup" class="panel">
    <h1>Flashcard Study</h1>
    <small>Paste vocab below (odd lines = term, even lines = definition)</small>
    <textarea id="vocab"></textarea>

    <div class="controls">
      <select id="startSide">
        <option value="term">Start on term</option>
        <option value="def">Start on definition</option>
      </select>
      <button id="start">Start</button>
    </div>
  </div>

  <!-- GAME SCREEN -->
  <div id="game" class="panel">
    <div class="cardWrap">
      <div class="card" id="card">
        <div class="inner" id="inner">
          <div class="face front" id="front">—</div>
          <div class="face back" id="back">—</div>
        </div>
      </div>

      <div class="nav">
        <button id="prev" class="ghost">&lt;</button>
        <button id="next" class="ghost">&gt;</button>
      </div>

      <div class="hint">Click card or press Space to flip · &lt; / &gt; to navigate</div>
    </div>
  </div>
</div>

<audio id="click" preload="auto" src="https://actions.google.com/sounds/v1/cartoon/wood_plank_flicks.ogg"></audio>

<script>
const vocabTA = document.getElementById('vocab');
const setup = document.getElementById('setup');
const game = document.getElementById('game');
const startBtn = document.getElementById('start');
const startSideSel = document.getElementById('startSide');

const card = document.getElementById('card');
const inner = document.getElementById('inner');
const front = document.getElementById('front');
const back = document.getElementById('back');
const prevBtn = document.getElementById('prev');
const nextBtn = document.getElementById('next');
const click = document.getElementById('click');

let cards = [];
let order = [];
let index = 0;
let flipped = false;
let startSide = 'term';

function sound(){click.currentTime=0;click.play();}

function parse(text){
  const lines = text.split(/\n+/).map(l=>l.trim()).filter(Boolean);
  const out=[];
  for(let i=0;i<lines.length;i+=2){
    if(lines[i+1]) out.push({term:lines[i],def:lines[i+1]});
  }
  return out;
}

function save(){localStorage.setItem('flashcards',vocabTA.value)}
function load(){const s=localStorage.getItem('flashcards');if(s)vocabTA.value=s}
load();

function shuffle(a){for(let i=a.length-1;i>0;i--){const j=Math.floor(Math.random()*(i+1));[a[i],a[j]]=[a[j],a[i]]}}

function render(){
  const c = cards[order[index]];
  if(startSide==='term'){
    front.textContent=c.term;
    back.textContent=c.def;
  } else {
    front.textContent=c.def;
    back.textContent=c.term;
  }
  inner.classList.remove('flipped');
  flipped=false;
}

function flip(){inner.classList.toggle('flipped');flipped=!flipped;sound();}

function next(){if(index<order.length-1){index++;render();sound();}}
function prev(){if(index>0){index--;render();sound();}}

startBtn.onclick=()=>{
  save();
  cards=parse(vocabTA.value);
  if(cards.length===0)return;
  order=cards.map((_,i)=>i);
  shuffle(order);
  index=0;
  startSide=startSideSel.value;
  setup.style.display='none';
  game.style.display='block';
  render();
  sound();
}

card.onclick=flip;
nextBtn.onclick=next;
prevBtn.onclick=prev;

window.addEventListener('keydown',e=>{
  if(game.style.display!=='block')return;
  if(e.code==='Space'){e.preventDefault();flip();}
  if(e.key==='>'||e.key==='ArrowRight')next();
  if(e.key==='<'||e.key==='ArrowLeft')prev();
});
</script>
</body>
</html>
